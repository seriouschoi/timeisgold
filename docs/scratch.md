# Scratch board.
(임시 작성 보드.)

# 테스트 작성 시점에 대한 고민.

## 기능 개발과 테스트 작성 시점의 트레이드 오프
- 유즈케이스를 추가하는 순간이 테스트를 작성하기 가장 이상적이다.
    - 이때가 맥락을 가장 깊게 이해하고 있기 때문.
- 하지만, 기능 개발 흐름 도중 테스트 작성에 들어가면 **맥락 전환(Context Switching)**으로 인해 생산성이 떨어지고, 작업이 단절되는 문제가 있다.
- 따라서, 실무에서는 기능 구현과 테스트 작성의 균형점을 찾는 것이 필요하다.

## 차선책: TODO 기반 방식
- 새로 작성한 유즈케이스나 함수에 // TODO test 형태로 마킹.
- 기능 개발 완료 후, 머지 직전에 테스트를 작성/보강.
- 그러나, 이 방식은 휴먼 에러로 인해 마킹 누락이나 방치가 발생할 수 있다.

## 최적해: 커버리지 도구 기반 방식
- 커버리지 도구(JaCoCo, Kover 등)를 활용해 자동으로 테스트 누락을 검출한다.
- TODO 주석에 의존하지 않고도 테스트 미작성 구간을 식별할 수 있다.
- CI에 연동하면, 테스트 커버리지가 줄어들거나 신규 코드가 테스트되지 않았을 때 자동으로 감지 가능하다.

## 결론.
> 테스트 작성 시점은 항상 **이상(코드 작성 직후)**과 현실(맥락 전환 비용) 사이의 트레이드 오프다.  
> 따라서, 단기적으론 TODO 마킹, 장기적으론 커버리지 자동화 도입이 가장 효율적인 접근이다.


# Domain Service

## 정의
엔티티 하나에만 속하지 않는 비즈니스 규칙/정책을 담당하는 도메인 계층의 서비스.
- 특정 엔티티의 책임으로 넣으면 역할이 비대해지거나 부적절한 경우에 별도의 도메인 서비스로 추출한다.
- 도메인의 의미를 담은 연산을 표현하는 것이 목적.

## 특징
- 상태(state)를 직접 들고 있지 않고, *행위(behavior)*만 가진다.
- 비즈니스 로직을 *Application Service(유즈케이스)*가 아니라 도메인 계층에서 표현하게 해줌.

## 예시
TimeRoutine 요일 중복 검사
- TimeRoutine 엔티티 단일 책임으로 넣으면 과해짐.
- 여러 TimeRoutine과 DayOfWeek가 걸린 규칙 → 도메인 서비스 적합.


